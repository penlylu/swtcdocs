# PaymentChannelClaim

从付款渠道申请SWTC，或者调整付款渠道的到期日期，或两者兼而有之。此事务可以使用不同的方式，具体取决于事务发送方在指定通道中的角色：

通道的**源地址**可以：

- 无论有没有签名声明，都可以将SWTC从通道发送到目的地址。
- 一旦通道到期，设置为过期。
- 清除待处理的Expiration时间。
- 无论是否先处理事务，可以立即关闭通道。如果通道上留有SWTC，则源地址不能立即关闭通道。

通道的**目标地址**可以:

- 使用已签名的声明从通道接收SWTC。
- 处理完事务后立即关闭通道，将无人认领的SWTC退还给通道的来源。

发送此交易的**任何地址**都可以：

- 如果通道过期时间或取消操作时间比上一个账本的收盘时间晚，通道会关闭。无论事务的内容如何，​​任何有效形成的PaymentChannelClaim事务都具有此效果。

## 示例PaymentChannelClaim JSON


```json
{
  "Channel": "C1AE6DDDEEC05CF2978C0BAD6FE302948E9533691DC749DCDD3B9E5992CA6198",
  "Balance": "1000000",
  "Amount": "1000000",
  "Signature": "30440220718D264EF05CAED7C781FF6DE298DCAC68D002562C9BF3A07C1E721B420C0DAB02203A5A4779EF4D2CCC7BC3EF886676D803A9981B928D3B8ACA483B80ECA3CD7B9B",
  "PublicKey": "32D2471DB72B27E3310F355BB33E339BF26F8392D5A93D3BC0FC3B566612DA0F0A"
}
```

## PaymentChannelClaim字段

除了公共字段之外，PaymentChannelClaim还使用以下字段：

| 字段       | JSON类型 | 类型 | 描述                    |
|:------------|:----------|:------------------|:-------------------------------|
| `Channel`   | String    | Hash256           | 通道的唯一ID，使用64个字符的十六进制字符串。 |
| `Balance`   | String    | Amount            | _(可选)_ 已创建通道中总的SWTC（单位为drop）。需要交付的SWTC必须大于该通道迄今为止提供的总金额，但不得超过已签署的金额。必须提供，除非关闭通道。 |
| `Amount`    | String    | Amount            | _(可选)_ 被签名授权的金额（单位为drop）。这必须与签名信息中的金额相匹配。这是通道可以分配的总的SWTC的量，包括之前赎回的SWTC。 |
| `Signature` | String    | VariableLength    | _(可选)_ 此声明的签名，以十六进制表示。签名信息包含通道ID和声明金额。 |
| `PublicKey` | String    | PubKey            | _(可选)_ 用于签名的公钥，以十六进制表示。这必须与PublicKey存储在通道的账本中的内容相匹配。（该事务包括PubKey，以便skyshell在尝试交易前检查签名的有效性。） |


## PaymentChannelClaim Flags

PaymentChannelClaim类型的事务在Flags字段中支持其他值，如下所示：

| Flag名称 | 十六进制值  | 十进制值| 描述                         |
|:----------|:-----------|:--------------|:------------------------------------|
| `tfRenew` | 0x00010000 | 65536         | 清除通道的过期时间。（过期时间与通道的不可变的取消时间不同。）只有支付通道的源地址才能使用此标志。 |
| `tfClose` | 0x00020000 | 131072        | 请求关闭频道。只有通道源和目标地址才能使用此标志。如果在处理当前声明后没有为其分配更多SWTC，或者目标地址使用它，则此标志立即关闭该通道。如果源地址在通道仍然保留SWTC时使用此标志，则会在设置的延迟秒数过后调度通道关闭。如果目标地址在通道仍然保留SWTC时使用此标志，则在处理完后，剩余的SWTC将返回源地址。 |

