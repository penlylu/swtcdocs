# 加密密钥

在SWTC帐本中，数字签名被证明是事务被授权执行一组特定的操作，只有签名的事务才能提交给网络，并包含在验证过的账本中。

每个数字签名都基于与发送交易的帐户相关联的加密密钥对，密钥对是使用SWTC帐本支持的加密签名算法生成。密钥对可以用作主密钥对、常规密钥对或签名者列表的成员，而不管使用什么算法生成它。

**注意:** 在私钥上维护适当的安全性是很重要的，数字签名是验证SWTC帐本是否被授权发送交易的唯一方法，而且没有特权管理员能够撤消或改变应用于帐本的任何交易。如果其他人知道SWTC账户的私钥，这个人可以像您一样创建数字签名来授权任何交易。

## 生成Keys

你可以使用wallet方法生成密钥对，wallet方法返回数据的例子如下：

```
{
  "result": {
    "account_id": "j9RWJBeM898ftQpHNSZgnc4Yv5kxXdCz6p",
    "key_type": "secp256k1",
    "master_key": "COON WARN AWE LUCK TILE WIRE ELI SNUG TO COVE SHAM NAT",
    "master_seed": "snsYqv2FsYLuibE9TGHdG5x5V5Qcn",
    "master_seed_hex": "736E73597176324673594C75696245395447486447357835563551636E",
    "public_key": "265612003144826134393364319274592114300790466621553021040441032890001650717189",
    "public_key_hex": "024B3B10F59CA9492A9EC51C4DAA8F9B7B061CB9501881379C44ED298F02519205"
  },
  "status": "success",
  "type": "response"
}
```

**私钥**

`master_key`, `master_seed`和`master_seed_hex`是私钥的不同表现形式, 所有这些私钥都可以用来签名交易。 尽管前缀都是 `master_`, 但它们不一定是账户的主密钥对。前缀`master_`更多地指的是密钥作为私钥的角色。 `master_seed`是主种子，从中可以获得有关此帐户的所有其他信息。

**公钥**

`public_key`和`public_key_hex`是不同格式的公钥，`public_key_hex`是对应于签名该交易私钥的公钥。无论是`public_key`与`public_key_hex`都是直接从`master_seed`导出。

**账户ID**

该`account_id`是从公共密钥导出并且是SWTC账本中的一个账户地址。需要知道的是，虽然`account_id`存在，但在`account_id`收到第一笔SWTC付款之前，SWTC账本不存在实际帐户。此外，在`account_id`收到资金并创建帐户的交易之后，才能发送任何交易。

但是`account_id`（没有激活）可以用作常规密钥或签名者列表的成员来为另一个账户的交易进行签名授权。

要创建资金帐户，`account_id`必须接收一笔足额的收款以满足保留要求。

您可以通过以下三种方式之一使用此生成的密钥对：主密钥对，常规密钥对或签名者列表成员。

**密钥类型**

该字段`key_type`指示使用哪种加密签名算法来生成此密钥对。


## 主密钥对

主密钥对由私钥和公钥组成。除了能让签名常规密钥对可以签名所有交易之外，主密钥对的私钥是唯一可用于执行以下操作的密钥：

* 禁用主公钥。

* 永久放弃冻结的能力。

* 发送 cost-0 密钥重置事务。

帐户的主密钥都是由wallet_propose方法生成，并用来签名授权交易。由于主密钥对在相同的响应产生的，它是内在联系的`account_id`，由`public_key_hex`所导出。

这与常规密钥对相反，常规密钥对也是使用该wallet_propose方法生成的，但必须明确指定为帐户的常规密钥对。由于明确分配了常规密钥对，因此它与`account_id`授权为其签名交易的帐户本质上无关。

**注意:** 无法更改主密钥对，但可以禁用它。这意味着如果您的主私钥被泄露，而不是更改它，您必须禁用它。

由于无法更改主密钥对，并且只有在发生泄密时才能将其禁用，因此可让您的主密钥对保持脱机状态，并设置常规密钥对来代替来自您帐户的交易。

保持主密钥对脱机意味着不要将主私钥放在恶意攻击者可以访问它的地方。例如，可以将其储存在U盘上，存储在保险箱中的纸张上，或者通常不在与互联网交互的计算机程序的范围内。理想情况下，主密钥对仅在最受信任的设备上使用，并且仅用于紧急情况，例如在可能或实际危害的情况下更改常规密钥对。


## 常规密钥对

SWTC账本允许帐户授权二级密钥对（称为常规密钥对），以便对未来的交易进行签名，同时保持主密钥对脱机。如果常规密钥对的私钥被泄露，您可以删除或替换它，而无需更改帐户的其余部分并重新建立与其他帐户的关系。您还可以主动替换常规密钥对。（对于帐户的主密钥对，这两种情况都不可能，这与帐户的地址有内在联系。）

您使用该wallet_propose方法生成密钥对以用作常规密钥对。但是，与主密钥对不同，主密钥对`account_id`与其支持的帐户一起生成并且内在关联，您必须明确创建常规密钥对与您希望为其签名交易的帐户之间的关系。您可以使用该SetRegularKey方法为帐户分配常规密钥对。

将常规密钥对分配给帐户后，该帐户有两个与之关联的密钥对：

* 与帐户有内在联系且您保持脱机状态的主密钥对。
* 您已明确分配给该帐户并用于为该帐户签名交易的常规密钥对。

您可以为帐户分配一个常规密钥对，并使用它对所有交易进行签名，但特别为主密钥对保留的交易除外。

您可以随时删除或更改常规密钥对。这意味着如果常规私钥被泄露（但主私钥不被破坏），您只需删除或更改常规密钥对即可重新获得对帐户的控制权。


## 签名算法

加密密钥对始终与特定的签名算法相关联，该算法定义了私钥和公钥之间的数学关系。加密签名算法具有以下特性：鉴于加密技术的当前状态，使用私钥来计算匹配的公钥是“容易的”，但实际上不可能通过从公钥开始来计算匹配的私钥。

SWTC账本支持以下加密签名算法：

| 密钥类型    | 算法 | 描述 |
|-------------|-----------|---|
| `secp256k1` | [ECDSA](https://csrc.nist.gov/CSRC/media/Projects/Cryptographic-Algorithm-Validation-Program/documents/dss2/ecdsa2vs.pdf)使用椭圆曲线[secp256k1](https://en.bitcoin.it/wiki/Secp256k1) | 这是比特币中使用的方案。SWTC账本默认使用这些密钥类型。 |
| `ed25519` | [EdDSA](https://tools.ietf.org/html/rfc8032) 使用椭圆曲线[Ed25519](https://ed25519.cr.yp.to/) | 这是一种较新的算法，具有更好的性能和其他方便的属性。 |

使用wallet_propose方法生成密钥对时，可以指定key_type选择用于派生密钥的加密签名算法。当签名交易时，如果生成的密钥类型不是默认密钥类型，则还必须指定`key_type`。

支持的密钥对类型可以在整个SWTC账本中互换使用，作为主密钥对，常规密钥对和签名者列表成员。对于secp256k1和Ed25519密钥对，导出地址的过程是相同的。

**注意:** 目前，您无法使用Ed25519密钥签名付款渠道声明。这里还有bug。

### 未来的算法

在未来，Jingtum希望为SWTC账本添加新的加密签名算法，以跟上加密技术的发展。例如，如果使用[Shor算法](https://en.wikipedia.org/wiki/Shor's_algorithm)（或类似的东西）的量子计算机似乎很快就会破坏椭圆曲线加密，那么Jingtum可以添加一个不易破解的加密签名算法。截至2018年初，这种“量子抗性”签名算法相对不切实际，量子计算机更加不切实际，因此Jingtum没有立即计划添加任何特定算法。

