# skywelld排除故障——诊断问题

如果您遇到“skywelld”问题，第一步是收集更多信息以准确表征问题。从那里，可以更容易找出根本原因和修复。

如果您的服务器无法启动（例如崩溃或以其他方式自动关闭），请参阅skywelld服务器无法启动以获取一些可能的原因和修复的列表。

本文档的其余部分提供了诊断服务器启动和运行时发生的问题的步骤（包括进程是否处于活动状态但无法与网络同步）。

## 获取server_info

您可以使用命令行从本地`skywelld`实例获取服务器状态信息。例如：

```
skywelld server_info
```

对此命令的响应包含大量信息，这些信息与server_info方法一起记录。出于故障排除目的，最重要的字段是（从最常用到最少）：

- **`server_state`** - 大多数情况下，这个字段应该为[配置为验证器]的服务器或`full`显示`proposing`。对于非验证服务器。值“connected”表示服务器可以与对等网络的其余部分进行通信，但它还没有足够的数据来跟踪共享分类帐状态的进度。通常情况下，同步到分类帐其余部分的状态大约需要5-15分钟后才能启动。

  - 如果您的服务器保持connected状态数小时，或者connected在处于full或处于状态后返回proposing状态，则通常表示您的服务器无法跟上网络的其余部分。最常见的瓶颈是磁盘I / O，网络带宽和RAM。
  

- **`complete_ledgers`** - 此字段显示您的服务器具有完整分类帐数据的[分类帐索引]（basic-data-types.html＃ledger-index）。健康的服务器通常有一系列最近的分类帐，例如“10037484-10037858”。

   - 如果您有一组不相交的完整分类帐，例如“27845721-2893420,2233424-2333858”，则表明您的服务器出现间歇性中断或暂时与网络其余部分不同步。造成这种情况的最常见原因是磁盘I / O或网络带宽不足。

  - 通常，`skywelld`服务器从其对等端下载最近的分类帐历史记录。如果分类帐历史记录中的差距持续超过几个小时，则可能无法连接到任何缺少数据的对等方。如果发生这种情况，您可以通过将以下节添加到配置文件并重新启动来强制服务器尝试与skywelld的完整历史记录服务器之一进行对等：

            [ips_fixed]
            s.jingtum.com 50333

- **`amend_blocked`** - 这个字段通常从`server_info`响应中省略。如果此字段显示值为“true”，则网络已批准您的服务器没有实现的[修订]。最有可能的是，您可以通过[更新skywelld]将其修复为最新版本。您还可以使用[feature method] 查看当前启用的修订ID以及您的服务器执行和不支持的修订ID。

- **`peers`** - 此字段指示您的服务器连接到的SWTC Ledger对等网络中有多少其他服务器。健康的服务器通常显示5到50个对等体，除非明确配置为仅连接到某些对等体。

   - 如果您有0个对等方，则您的服务器可能无法联系网络，或者您的系统时钟可能出错。 （skywelld建议在所有服务器上运行[NTP]（ http://www.ntp.org/ ）守护程序以保持其时钟同步。）

  - 如果您有10个对等体，则可能表示您的“skywelld”无法通过路由器使用[NAT]（ https://en.wikipedia.org/wiki/Network_address_translation ）接收传入连接。您可以通过配置路由器的防火墙来转发用于对等连接的端口来提高连接性（端口50333[默认]]
  
### 没有来自服务器的响应

如果`skywelld`可执行文件无法作为客户端连接到`skywelld`服务器，则返回以下消息：

```JSON
{
   "error" : "internal",
   "error_code" : 71,
   "error_message" : "Internal error.",
   "error_what" : "no response from server"
}
```

这通常表明以下几个问题之一：

- “skywelld”服务器刚刚启动，或根本没有运行。检查服务的状态;如果它正在运行，请等待几秒钟再试一次。
- 您可能需要将不同的[参数传递给`skywelld`命令行客户端]以连接到您的服务器。
- “skywelld”服务器可能配置为不接受JSON-RPC连接。


## 检查服务器日志

[默认情况下]`skywelld`将服务器的调试日志写入文件`/ var / log /skywelld/ debug.log`。调试日志的位置可能因服务器的配置文件而异。如果直接启动`skywelld`服务，它默认情况下也会将日志消息打印到控制台。

默认配置文件通过在启动期间内部使用log_level方法将日志级别设置为所有类别的日志消息的严重性“警告” 。您可以在启动期间使用--silent命令行选项控制调试日志的详细程度，并在服务器运行时使用log_level方法控制调度日志的详细程度。（有关[rpc_startup]设置，请参阅配置文件的节。）

“skywelld”服务器在启动期间打印许多警告级别（“WRN”）消息并且稍后会不时打印一些警告级别消息是正常的。您可以在服务器启动的前5到15分钟内**安全地忽略**大多数警告。

有关各种类型的日志消息的更全面说明，请参阅[了解日志消息]。
